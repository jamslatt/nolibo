<template name="home">
  <div class="row">
    <div class="container" style="margin-top: 10vh;">
      <div class="col-md-12 ">

        <div class="jumbotron">
          <h1 class="display-4">Â¡No Libo!</h1>
          <p class="subtitle">Before this... you had no libo. You had no libo because you waited in line for Gumpy to write his buddys name in a notebook. Say goodbye to writing and drawing lines in a green book. The only downside to this is we save
            trees.</p>
          <hr class="my-4">
          <div class="row">
            <div class="col-md-6">
              <a href="/out" style="width: 100%;height: 175px;" class="btn btn-lg btn-primary"><br /><i class="fas fa-sign-out-alt"></i><br />Sign Out<br /><i>leaving alpha co</i></a>
            </div>
            <div class="col-md-6">
              <a href="/in" style="width: 100%;height: 175px;vertical-align: bottom;" class="btn btn-lg btn-outline-primary"><br /><i class="fas fa-sign-in-alt"></i><br />Sign In<br /><i>coming back from trip</i></a>
            </div>

          </div>
          <br />
          <div class="row">
            <div class="col-md-12">
              <a href="/offbase" style="width: 100%" class="btn btn-lg btn-outline-success">Leave Fort Lee (off base)</a>
            </div>
            <div class="col-md-12">
              <br />
              <h6 class="card-subtitle mb-2 text-muted">Created with <i class="fas fa-code"></i> by Slattery</h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="container" style="margin-top: 10vh;">
      <div class="col-md-2 offset-md-8  ">
        <ul class="nav nav-pills">
          <li class="nav-item">
            <a href="/sdo" class="btn nav-link btn-lg btn-outline-danger">SDO <i class="fas fa-tachometer-alt"></i></a>
          </li>
          <li class="nav-item">
            <a href="/intake" class="btn nav-link btn-lg btn-outline-danger">Intake <i class="fas fa-file-signature"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
<template name="signIn">
  <div class="container" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-12 ">
        <div class="jumbotron">
          <h1 class="display-4">Scan your CAC Card...</h1>
          <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
          <a href="/out" title="Sign Out" class="btn btn-outline-primary">Sign Out <i class="fas fa-sign-out-alt"></i></a>
          <hr class="my-4">
          <form>
            <div class="form-group">
              <input type="text" class="form-control" id="cacOne" placeholder="Scan the first CAC">
            </div>
          </form>
          <script>
            $("#cacOne").keypress(function(event) {
            if (event.which == 13) {
                event.preventDefault();
                one = $('#cacOne').delay(2000).val().substring(35,50);
                location.replace("/n/"+ one);


            }
          });


          </script>
        </div>
      </div>
    </div>
    <script>
      $('#cac').focus();
    </script>
  </div>

</template>
<template name="signOut">
  <div class="container" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-12 ">
        <div class="jumbotron">
          <h1 class="display-4">Sign Out</h1>
          <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
          <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In <i class="fas fa-sign-in-alt"></i></a>

          <hr class="my-4">
          <div class="form-group">
            <label for="primaryCAC">CAC #1</label>
            <input type="text" name="primaryCAC" class="form-control" id="primaryCAC" aria-describedby="pCAChelp" placeholder="Scan your CAC Card...">
            <small id="pCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          <div class="form-group">
            <label for="secondaryCAC">CAC #2</label>
            <input type="text" name="secondaryCAC" class="form-control" id="secondaryCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
            <small id="sCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          <div class="form-group">
            <label for="secondaryCAC">CAC #3 (optional)</label>
            <input type="text" name="thirdCAC" class="form-control" id="thirdCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
            <small id="tCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>


          <div class="form-group">
            <label for="secondaryCAC">Destination</label>
            <input type="text" name="destination" class="form-control" id="location" aria-describedby="loc" placeholder="Scan your destination...">
            <small id="loc" class="form-text text-muted">Scan the barcode that matches the location you are traveling to.</small>
          </div>
          <button type="button" class="btn btn-outline-primary" data-toggle="button" aria-pressed="false" autocomplete="off">Single toggle</button>

          <br />
          <span class="btn btn-lg signIn btn-primary">Sign Out&nbsp;<i class="fas fa-sign-out-alt"></i></span>

        </div>
      </div>
    </div>
    <script>
      $('#primaryCAC').focus();
      /*$(":input").keypress(function(event){
    if (event.which == '10' || event.which == '13') {
        event.preventDefault();
    }
    });*/
    jQuery.extend(jQuery.expr[':'], {
    focusable: function (el, index, selector) {
        return $(el).is('a, button, :input, [tabindex]');
    }
    });

    $(document).on('keypress', 'input,select', function (e) {

    if (e.which == 13) {
        e.preventDefault();
        // Get all focusable elements on the page
        var $canfocus = $(':focusable');
        var index = $canfocus.index(document.activeElement) + 1;
        if (index >= $canfocus.length) index = 0;
        $canfocus.eq(index).delay(1000).focus();
    }
    });


    $("#location").keypress(function(event) {
    if (event.which == 13) {
      $('form').submit();
  }
});
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

  </div>
</template>

<template name="signOutOffBase">
  <div class="container" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-12 ">
        <div class="jumbotron">
          <h1 class="display-4">Sign Out (Off Base)</h1>
          <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
          <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In <i class="fas fa-sign-in-alt"></i></a>

          <hr class="my-4">

          <div class="alert alert-warning" role="alert">
            You <strong>MUST</strong> update the SDO if you travel to locations other than the location you list below.
          </div>

          <div class="form-group">
            <label for="primaryCAC">CAC #1</label>
            <input type="text" name="primaryCAC" class="form-control" id="primaryCAC" aria-describedby="pCAChelp" placeholder="Scan your CAC Card...">
            <small id="pCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          <div class="form-group">
            <label for="secondaryCAC">CAC #2</label>
            <input type="text" name="secondaryCAC" class="form-control" id="secondaryCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
            <small id="sCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          <div class="form-group">
            <label for="secondaryCAC">CAC #3 (optional)</label>
            <input type="text" name="thirdCAC" class="form-control" id="thirdCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
            <small id="tCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>


          <div class="form-group">
            <label for="secondaryCAC">Destination</label>
            <input type="text" name="destination" class="form-control" id="location" aria-describedby="loc" placeholder="Enter the exact location.">
            <small id="loc" class="form-text text-muted">Enter the exact location you are traveling to.</small>
          </div>

          <br />
          <span class="btn btn-lg signIn btn-primary">Sign Out&nbsp;<i class="fas fa-sign-out-alt"></i></span>

        </div>
      </div>
    </div>
    <script>
      $('#primaryCAC').focus();
      /*$(":input").keypress(function(event){
    if (event.which == '10' || event.which == '13') {
        event.preventDefault();
    }
    });*/
    jQuery.extend(jQuery.expr[':'], {
    focusable: function (el, index, selector) {
        return $(el).is('a, button, :input, [tabindex]');
    }
    });

    $(document).on('keypress', 'input,select', function (e) {

    if (e.which == 13) {
        e.preventDefault();
        // Get all focusable elements on the page
        var $canfocus = $(':focusable');
        var index = $canfocus.index(document.activeElement) + 1;
        if (index >= $canfocus.length) index = 0;
        $canfocus.eq(index).delay(1000).focus();
    }
    });


    $("#location").keypress(function(event) {
    if (event.which == 13) {
      $('form').submit();
  }
});
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

  </div>
</template>

<template name="byname">
  <div class="container" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-12 ">
        <div class="jumbotron">
          <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
          <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In <i class="fas fa-sign-in-alt"></i></a>
          <a href="/out" title="Sign Out" class="btn btn-outline-primary">Sign Out <i class="fas fa-sign-out-alt"></i></a>

          <table class="table">
            <thead>
              <tr>
                <th scope="col">Names</th>
                <th scope="col">Location</th>
                <th scope="col">Time Out</th>
                <th scope="col">Sign In</th>
              </tr>
            </thead>
            <tbody>
              {{#each primary}}
                <tr>
                  <td>{{firstName}} / {{secondName}}{{#if thirdName}} / {{thirdName}}{{/if}}</td>
                  <td>{{destination}}</td>
                  <td>{{signOut}}</td>
                  <td><button id="signIn" class="btn btn-sm btn-warning" onclick="location.replace('/si/{{_id}}')">Sign in <i class="fas fa-sign-in-alt"></i></button></td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</template>
<template name="sdo">

  <div class="container-fluid" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-8 offset-md-2 jumbotron">
        <h1 class="display-4"><i class="fas fa-tachometer-alt"></i> SDO Dashboard</h1>
        <div class="row">
          <div class="col-md-6">
            <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
            <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In <i class="fas fa-sign-in-alt"></i></a>
            <a href="/out" title="Sign Out" class="btn btn-outline-primary">Sign Out <i class="fas fa-sign-out-alt"></i></a>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#noSign">
              View all who have failed to signed in.
            </button>
          </div>
          <div class="col-md-6">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">History</span>
              </div>
              <input type="text" class="form-control" id="history" placeholder="Enter Day to View Records YYYYMMDD" required>
            </div>
          </div>
        </div>
        <script>
          $("#history").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            name = $('#history').val();
            location.replace("/d/"+ name);

        }
      });
        </script>

        <div class="row">
          <div class="col-md-8">
            <div class="alert alert-light" style="margin-top: 25px" role="alert">
              Hit <em>Ctrl+F</em> to search for a name or location!
            </div>
          </div>
          <div class="col-md-4">
            <div class="alert alert-light" style="margin-top: 25px" role="alert">
              Total Out: {{totalOut}} Marines
            </div>
          </div>


<!-- Modal -->
<div class="modal fade" id="noSign" tabindex="-1" role="dialog" aria-labelledby="noSignLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 1100px" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="noSignLabel">Failed to Sign In</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Names</th>
              <th scope="col">Location</th>
              <th scope="col">Phone</th>
              <th scope="col">Time Out</th>
              <th scope="col">Sign In</th>
            </tr>
          </thead>
          <tbody>
            {{#each noSign}}
              <tr>
                <td>{{firstName}} / {{secondName}}{{#if thirdName}} / {{thirdName}}{{/if}}</td>
                <td><span class="changeLoc" style="cursor: pointer">{{destination}}</span></td>
                <td>{{phoneOne}}<br/>{{phoneTwo}}<br/>{{phoneThree}}</td>
                <td>{{signOut}}</td>
                <td>{{#if signIn}}{{signIn}}{{else}}
                    <div class="alert alert-danger" role="alert">FAILED TO SIGN IN</div>
                  {{/if}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th scope="col">Names</th>
              <th scope="col">Location</th>
              <th scope="col">Phone</th>
              <th scope="col">Time Out</th>
              <th scope="col">Sign In</th>
            </tr>
          </thead>
          <tbody>
            {{#each primaryDB}}
              <tr>
                <td>{{firstName}} / {{secondName}}{{#if thirdName}} / {{thirdName}}{{/if}}</td>
                <td><span class="changeLoc" style="cursor: pointer">{{destination}}</span></td>
                <td>{{phoneOne}}<br/>{{phoneTwo}}<br/>{{phoneThree}}</td>
                <td>{{signOut}}</td>
                <td>{{#if signIn}}{{signIn}}{{else}}
                    <div class="alert alert-danger" role="alert">FAILED TO SIGN IN</div>
                  {{/if}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>

<template name="sdoHistory">

  <div class="container-fluid" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-8 offset-md-2 jumbotron">
        <h1 class="display-4">SDO Dashboard</h1>
        <div class="row">
          <div class="col-md-6">
            <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
            <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In</a>
            <a href="/out" title="Sign Out" class="btn btn-outline-primary">Sign Out</a>
          </div>
          <div class="col-md-6">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">History</span>
              </div>
              <input type="text" class="form-control" id="history" placeholder="Enter Day to View Records YYYYMMDD" required>
            </div>
          </div>
        </div>
        <script>
          $("#history").keypress(function(event) {
            if (event.which == 13) {
              event.preventDefault();
              name = $('#history').val();
              location.replace("/d/" + name);

            }
          });
        </script>

        <div class="col-md-8">
          <div class="alert alert-light" style="margin-top: 25px" role="alert">
            Hit <em>Ctrl+F</em> to search for a name or location!
          </div>
        </div>
        <div class="col-md-4">
          <div class="alert alert-light" style="margin-top: 25px" role="alert">
            Total Out:
          </div>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Buddy</th>
              <th scope="col">Location</th>
              <th scope="col">Time Out</th>
              <th scope="col">Sign In</th>
            </tr>
          </thead>
          <tbody>
            {{#each primaryDB}}
              <tr>
                <td>{{firstName}} / {{secondName}}{{#if thirdName}} / {{thirdName}}{{/if}}</td>
                <td>{{destination}}</td>
                <td>{{signOut}}</td>
                <td>{{#if signIn}}{{signIn}}{{else}}
                    <div class="alert alert-danger" role="alert">FAILED TO SIGN IN</div>
                  {{/if}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>


<template name="signInVerify">
  <div class="container" style="margin-top: 10vh">
    <div class="row">
      <div class="col-md-12 ">
        <div class="jumbotron">
          <h1 class="display-4">Verify all CAC Cards...</h1>
          <a href="/" title="Home" class="btn btn-outline-primary">Home</a>
          <a href="/in" title="Sign In" class="btn btn-outline-primary">Sign In <i class="fas fa-sign-in-alt"></i></a>
          <a href="/out" title="Sign Out" class="btn btn-outline-primary">Sign Out <i class="fas fa-sign-out-alt"></i></a>

          <hr class="my-4">
          <div class="form-group">
            <label for="primaryCAC">{{ firstName }} scan your CAC...</label>
            <input type="text" name="primaryCAC" class="form-control" id="primaryCAC" aria-describedby="pCAChelp" placeholder="Scan your CAC Card...">
            <small id="pCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          <div class="form-group">
            <label for="secondaryCAC">{{ secondName }} scan your CAC...</label>
            <input type="text" name="secondaryCAC" class="form-control" id="secondaryCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
            <small id="sCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
          </div>
          {{#if thirdCAC}}
            <div class="form-group">
              <label for="secondaryCAC">{{ thirdName }} scan your CAC...</label>
              <input type="text" name="thirdCAC" class="form-control" id="thirdCAC" aria-describedby="sCAChelp" placeholder="Scan your CAC Card...">
              <small id="tCAChelp" class="form-text text-muted">Scan the barcode just below your picture on your Military ID (CAC).</small>
            </div>
          {{/if}}
          <button style="width:100%" class="btn btn-lg btn-outline-primary signIn">Sign In</button>

        </div>
      </div>
    </div>
  </div>
</template>
